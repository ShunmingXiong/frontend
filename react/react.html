<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React原理揭秘 | 前端修仙传</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="前端杂货铺">
    
    <link rel="preload" href="/frontend/assets/css/0.styles.5245c59d.css" as="style"><link rel="preload" href="/frontend/assets/js/app.49595f4b.js" as="script"><link rel="preload" href="/frontend/assets/js/3.03f8d344.js" as="script"><link rel="preload" href="/frontend/assets/js/1.070fcf05.js" as="script"><link rel="preload" href="/frontend/assets/js/11.0b773cd9.js" as="script"><link rel="prefetch" href="/frontend/assets/js/10.9fa563ed.js"><link rel="prefetch" href="/frontend/assets/js/12.d20bc83e.js"><link rel="prefetch" href="/frontend/assets/js/13.81190583.js"><link rel="prefetch" href="/frontend/assets/js/14.bd78107f.js"><link rel="prefetch" href="/frontend/assets/js/15.c5d7f97c.js"><link rel="prefetch" href="/frontend/assets/js/16.e5977004.js"><link rel="prefetch" href="/frontend/assets/js/17.7ff1ed63.js"><link rel="prefetch" href="/frontend/assets/js/18.b489a0d0.js"><link rel="prefetch" href="/frontend/assets/js/19.6951ccf8.js"><link rel="prefetch" href="/frontend/assets/js/20.43f56bac.js"><link rel="prefetch" href="/frontend/assets/js/4.dd020e2d.js"><link rel="prefetch" href="/frontend/assets/js/5.8fa88da5.js"><link rel="prefetch" href="/frontend/assets/js/6.6dd18847.js"><link rel="prefetch" href="/frontend/assets/js/7.e1f500b8.js"><link rel="prefetch" href="/frontend/assets/js/8.d47cf401.js"><link rel="prefetch" href="/frontend/assets/js/9.378f04b4.js">
    <link rel="stylesheet" href="/frontend/assets/css/0.styles.5245c59d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>前端修仙传</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>前端杂货铺</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend/" class="home-link router-link-active"><!----> <span class="site-name">前端修仙传</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      万物水的 前端 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ShunmingXiong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2717648476974157/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>11</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/frontend/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      万物水的 前端 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/ShunmingXiong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2717648476974157/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/frontend/" class="sidebar-heading clickable router-link-active"><span>欢迎来到我的学习园地</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/" aria-current="page" class="sidebar-link">自我简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend/vue/vuebase/Vue-base" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/vue/vuebase/Vue-base.html" class="sidebar-link">vue基础知识</a></li><li><a href="/frontend/vue/vuerouter/vuerouter.html" class="sidebar-link">vuerouter</a></li><li><a href="/frontend/vue/vuereactive/VueReactive.html" class="sidebar-link">vue响应式原理</a></li><li><a href="/frontend/vue/vdom/vdom.html" class="sidebar-link">vue虚拟dom</a></li><li><a href="/frontend/vue/vuex/Vuex.html" class="sidebar-link">vuex状态管理</a></li><li><a href="/frontend/vue/vuetech/VueTech.html" class="sidebar-link">vuetech面试</a></li><li><a href="/frontend/vue/vuessr/vuessr.html" class="sidebar-link">vuessr</a></li><li><a href="/frontend/vue/nuxt/nuxt.html" class="sidebar-link">nuxt</a></li><li><a href="/frontend/vue/vuesource/vuesource.html" class="sidebar-link">vuesource</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/frontend/react/react" class="sidebar-heading clickable open active"><span>react</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/react/react.html" aria-current="page" class="active sidebar-link">react核心知识</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">React原理揭秘</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="react原理揭秘"><a href="#react原理揭秘" class="header-anchor">#</a> React原理揭秘</h1> <h2 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h2> <ul><li>能够说出React组件的更新机制</li> <li>能够对组件进行性能优化</li> <li>能够说出虚拟DOM和DIff算法</li></ul> <h2 id="组件更新机制"><a href="#组件更新机制" class="header-anchor">#</a> 组件更新机制</h2> <ul><li><p>setState() 的两个作用</p> <ul><li>修改state</li> <li>更新组件</li></ul></li> <li><p>过程：父组件重新渲染时，也会重新渲染子组件，但只会渲染当前组件子树（当前组件以其所有子组件）</p></li></ul> <p><img src="images/%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0.png" alt=""></p> <h2 id="组件性能优化"><a href="#组件性能优化" class="header-anchor">#</a> 组件性能优化</h2> <h3 id="减轻state"><a href="#减轻state" class="header-anchor">#</a> 减轻state</h3> <ul><li>减轻state：只存储跟组件渲染相关的数据（比如：count/ 列表数据 /loading等）</li> <li>注意：不用做渲染的数据不要放在state中</li> <li>对于这种需要在多个方法中用到的数据，应该放到this中</li></ul> <p><img src="images/%E5%87%8F%E8%BD%BBstate.png" alt=""></p> <h3 id="避免不必要的重新渲染"><a href="#避免不必要的重新渲染" class="header-anchor">#</a> 避免不必要的重新渲染</h3> <ul><li>组件更新机制：父组件更新会引起子组件也被更新，这种思路很清晰</li> <li>问题：子组件没有任何变化时也会重新渲染</li> <li>如果避免不必要的重新渲染？</li> <li>解决方式：使用钩子函数 shouldComponentUpdate(nextProps, nextState)
<ul><li>在这个函数中，nextProps和nextState是最新的状态以及属性</li></ul></li> <li>作用：这个函数有返回值，如果返回true，代表需要重新渲染，如果返回false，代表不需要重新渲染</li> <li>触发时机：更新阶段的钩子函数，组件重新渲染前执行(shouldComponentUpdate =&gt; render)</li></ul> <p><img src="images/shouldComponentUpdata.png" alt=""></p> <h4 id="随机数案例"><a href="#随机数案例" class="header-anchor">#</a> 随机数案例</h4> <p>需求：随机生成数字，显示在页面，如果生成的数字与当前显示的数字相同，那么就不需要更新UI，反之更新UI。</p> <p>利用nextState参数来判断当前组件是否需要更新</p> <div class="language-react extra-class"><pre class="language-text"><code>class App extends React.Component {
    state = {
        number: 0
    }
    // 点击事件，每次点击生成一个随机数
    hanldeBtn = () =&gt; {
        this.setState({
            number: Math.floor(Math.random() * 3)
        })
    }
    // 将要更新UI的时候会执行这个钩子函数
    shouldComponentUpdate(nextProps,nextState) {
         // 判断一下当前生成的 值是否与页面的值相等
         if(nextState.number !== this.state.number){
             return true
         }
         return false
    }
    render() {
        return (
            &lt;div&gt;
                随机数：{this.state.number} &lt;br /&gt;
                &lt;button onClick={this.hanldeBtn}&gt;生成随机数&lt;/button&gt;
            &lt;/div&gt;
        )
    }
}
</code></pre></div><p>利用props参数来判断是否需要进行更新</p> <div class="language-react extra-class"><pre class="language-text"><code>class App extends React.Component {
    state = {
        number: 0
    }
    // 点击事件，每次点击生成一个随机数
    hanldeBtn = () =&gt; {
        this.setState({
            number: Math.floor(Math.random() * 3)
        })
    }

    render() {
        return (
            &lt;div&gt;
                &lt;NumberBox number={this.state.number} /&gt;
                &lt;button onClick={this.hanldeBtn}&gt;生成随机数&lt;/button&gt;
            &lt;/div&gt;
        )
    }
}
class NumberBox extends React.Component {
    // 将要更新UI的时候会执行这个钩子函数
    shouldComponentUpdate(nextProps, nextState) {
        // 判断一下当前生成的 值是否与页面的值相等
        if (nextProps.number !== this.props.number) {
            return true
        }
        return false
    }
    render() {
        return (
            &lt;h1&gt;随机数：{this.props.number} &lt;/h1&gt;
        )
    }
}
</code></pre></div><h3 id="纯组件"><a href="#纯组件" class="header-anchor">#</a> 纯组件</h3> <h4 id="作用以及使用"><a href="#作用以及使用" class="header-anchor">#</a> 作用以及使用</h4> <ul><li>纯组件： PureComponent 与 React.Component 功能相似</li> <li>区别： PureComponent 内部自动实现了 shouldComponentUpdate钩子，不需要手动比较</li> <li>原理：纯组件内部通过分别比对前后两次 props和state的值，来决定是否重新渲染组件</li></ul> <p><img src="images/PureComponent.png" alt=""></p> <h4 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h4> <ul><li>说明：纯组件内部的对比是 shallow compare（浅层对比）</li> <li>对于值类型来说：比较两个值是否相同</li></ul> <p><img src="images/%E5%80%BC%E7%B1%BB%E5%9E%8B%E6%AF%94%E5%AF%B9.png" alt=""></p> <ul><li>引用类型：只比对对象的引用地址是否相同</li></ul> <p><img src="images/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E6%AF%94%E5%AF%B9.png" alt=""></p> <ul><li>注意：state 或 props 中属性值为引用类型时，应该创建新数据，不要直接修改原数据</li></ul> <p><img src="images/%E6%B3%A8%E6%84%8F%E7%82%B9.png" alt=""></p> <h2 id="虚拟dom和diff算法"><a href="#虚拟dom和diff算法" class="header-anchor">#</a> 虚拟DOM和Diff算法</h2> <ul><li>React更新视图的思想是：只要state变化就重新渲染视图</li> <li>特点：思路非常清晰</li> <li>问题：组件中只有一个DOM元素需要更新时，也得把整个组件的内容重新渲染吗？ 不是这样的</li> <li>理想状态：部分更新，只更新变化的地方</li> <li>React运用的核心点就是 虚拟DOM 配合 Diff 算法</li></ul> <h3 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h3> <p>本质上就是一个JS对象，用来描述你希望在屏幕上看到的内容</p> <p><img src="images/%E8%99%9A%E6%8B%9FDOM.png" alt=""></p> <h3 id="diff算法"><a href="#diff算法" class="header-anchor">#</a> Diff算法</h3> <p>执行过程</p> <ul><li>初次渲染时，React会根据初始化的state（model），创建一个虚拟DOM对象（树）</li> <li>根据虚拟DOM生成真正的DOM，渲染到页面</li> <li>当数据变化后(setState())，会重新根据新的数据，创建新的虚拟DOM对象（树）</li> <li>与上一次得到的虚拟DOM对象，使用Diff算法比对（找不同），得到需要更新的内容</li> <li>最终，React只将变化的内容更新（patch）到DOM中，重新渲染到页面</li></ul> <p><img src="images/diff%E7%AE%97%E6%B3%95.png" alt=""></p> <h3 id="代码演示"><a href="#代码演示" class="header-anchor">#</a> 代码演示</h3> <ul><li>组件render()调用后，根据状态和JSX结构生成虚拟DOM对象(render()方法的调用并不意味着浏览器进行渲染，render方法调用时意味着Diff算法开始比对了)</li> <li>示例中，只更新p元素的文本节点内容</li> <li>初次渲染的DOM对象</li></ul> <p><img src="images/%E5%88%9D%E6%AC%A1%E7%9A%84%E8%99%9A%E6%8B%9FDOM%E5%AF%B9%E8%B1%A1.png" alt=""></p> <ul><li>数据更新之后的虚拟DOM对象</li></ul> <p><img src="images/%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E8%99%9A%E6%8B%9FDOM%E5%AF%B9%E8%B1%A1.png" alt=""></p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <ul><li>工作角度：应用第一，原理第二</li> <li>原理有助于更好的理解React的自身运行机制</li> <li>setState() 异步更新数据</li> <li>父组件更新导致子组件更新，纯组件提升性能</li> <li>思路清晰简单为前提，虚拟DOM和Diff保效率（渲染变化的组件）</li> <li>虚拟DOM -&gt; state + JSX</li> <li>虚拟DOM最大的特点是 脱离了浏览器的束缚，也就是意味着只要是能支持js的地方都可以用到react，所以为什么说react是可以进行跨平台的开发</li></ul> <h1 id="react路由基础"><a href="#react路由基础" class="header-anchor">#</a> React路由基础</h1> <h2 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h2> <ul><li>能够说出React路由的作用</li> <li>能够掌握-react-router-dom的基本使用</li> <li>能够使用编程式导航跳转路由</li> <li>能够知道React路由的匹配模式</li></ul> <h2 id="react路由介绍"><a href="#react路由介绍" class="header-anchor">#</a> React路由介绍</h2> <p>现代的前端应用大多数是SPA（单页应用程序），也就是只有一个HTML页面的应用程序。因为它的用户体验更好、对服务器压力更小，所以更受欢迎。为了有效的使用单个页面来管理多页面的功能，前端路由应运而生。</p> <ul><li>前端路由功能：让用户从一个视图（页面）导航到另一个视图（页面）</li> <li>前端路由是一套映射规则，在React中，是URL路径与组件的对应关系</li> <li>使用React路由简单来说，就是配置路径和组件</li></ul> <h2 id="路由的基本使用"><a href="#路由的基本使用" class="header-anchor">#</a> 路由的基本使用</h2> <h3 id="使用步骤"><a href="#使用步骤" class="header-anchor">#</a> 使用步骤</h3> <ul><li><p>安装： yarn add react-router-dom</p> <ul><li>如果没有安装yarn工具的，需要先全局安装一下yarn：npm install -g yarn</li></ul></li> <li><p>导入路由的三个核心组件： Router / Route / Link</p> <div class="language-react extra-class"><pre class="language-text"><code>import {BrowserRouter as Router, Route, Link} from 'react-router-dom'
</code></pre></div></li> <li><p>使用Router 组件包裹整个应用</p></li></ul> <p><img src="images/Router.png" alt=""></p> <ul><li>使用Link组件作为导航菜单（路由入口）</li></ul> <p><img src="images/link%E5%85%A5%E5%8F%A3.png" alt=""></p> <ul><li>使用Route组件配置路由规则和要展示的组件（路由出口）</li></ul> <p><img src="images/route.png" alt=""></p> <h3 id="常用组件说明"><a href="#常用组件说明" class="header-anchor">#</a> 常用组件说明</h3> <ul><li>**Router组件：**包裹整个应用，一个React应用只需要使用一次
<ul><li>两种常用的Router： HashRouter和BrowserRouter</li> <li>HashRouter： 使用URL的哈希值实现 （localhost:3000/#/first）</li> <li>推荐 BrowserRouter：使用H5的history API实现（localhost3000/first）</li></ul></li> <li>**Link组件：**用于指定导航链接（a标签）
<ul><li>最终Link会编译成a标签，而to属性会被编译成 a标签的href属性</li></ul></li> <li>**Route组件：**指定路由展示组件相关信息
<ul><li>path属性：路由规则，这里需要跟Link组件里面to属性的值一致</li> <li>component属性：展示的组件</li> <li>Route写在哪，渲染出来的组件就在哪</li></ul></li></ul> <h3 id="路由的执行过程"><a href="#路由的执行过程" class="header-anchor">#</a> 路由的执行过程</h3> <ul><li>当我们点击Link组件的时候，修改了浏览器地址栏中的url</li> <li>React路由监听地址栏url的变化</li> <li>React路由内部遍历所有的Route组件，拿着Route里面path规则与pathname进行匹配</li></ul> <p><img src="images/route%E5%8C%B9%E9%85%8D.png" alt=""></p> <ul><li>当路由规则（path）能够匹配地址栏中的pathname时，就展示该Route组件的内容</li></ul> <h3 id="编程式导航"><a href="#编程式导航" class="header-anchor">#</a> 编程式导航</h3> <ul><li>**场景：**点击登陆按钮，登陆成功后，通过代码跳转到后台首页，如何实现？</li> <li>**编程式导航：**通过JS代码来实现页面跳转</li> <li>history是React路由提供的，用于获取浏览器历史记录的相关信息</li> <li>**push(path)：**跳转到某个页面，参数path表示要跳转的路径</li> <li>go(n)：前进或后退功能，参数n表示前进或后退页面数量</li></ul> <p><img src="images/%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA.png" alt=""></p> <h3 id="默认路由"><a href="#默认路由" class="header-anchor">#</a> 默认路由</h3> <ul><li>现在的路由都是通过点击导航菜单后展示的，如果进入页面的时候就主动触发路由呢</li> <li>默认路由：表示进入页面时就会匹配的路由</li> <li>默认路由：只需要把path设置为 <code>'/'</code></li></ul> <p><img src="images/%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1.png" alt=""></p> <h3 id="匹配模式"><a href="#匹配模式" class="header-anchor">#</a> 匹配模式</h3> <h4 id="模糊匹配模式"><a href="#模糊匹配模式" class="header-anchor">#</a> 模糊匹配模式</h4> <ul><li>当Link组件的to属性值为 '/login' 时候，为什么默认路由也被匹配成功？</li> <li>默认情况下，React路由是模糊匹配模式</li> <li>模糊匹配规则：只要pathname以path开头就会匹配成功</li></ul> <p><img src="images/%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F.png" alt=""></p> <h4 id="精准匹配"><a href="#精准匹配" class="header-anchor">#</a> 精准匹配</h4> <ul><li>默认路由认可情况下都会展示，如果避免这种问题？</li> <li>给Route组件添加exact属性，让其变为<strong>精准匹配模式</strong></li> <li>精确匹配：只有当path和pathname完全匹配时才会展示改路由</li></ul> <p><img src="images/%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D.png" alt=""></p> <h3 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h3> <ul><li>React路由可以有效的管理多个视图实现 SPA</li> <li>路由先需要通过安装</li> <li>Router组件包裹整个应用，只需要使用一次</li> <li>Link组件是入口，Route组件是出口</li> <li>通过props.history实现编程式导航</li> <li>默认是模糊匹配，添加exact编程精确匹配</li> <li>React路由的一切都是组件，可以像思考组件一样思考路由</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/frontend/vue/vuesource/vuesource.html" class="prev">
            vuesource
          </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#目标" class="sidebar-link reco-side-目标" data-v-cb1513f6>目标</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#组件更新机制" class="sidebar-link reco-side-组件更新机制" data-v-cb1513f6>组件更新机制</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#组件性能优化" class="sidebar-link reco-side-组件性能优化" data-v-cb1513f6>组件性能优化</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#减轻state" class="sidebar-link reco-side-减轻state" data-v-cb1513f6>减轻state</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#避免不必要的重新渲染" class="sidebar-link reco-side-避免不必要的重新渲染" data-v-cb1513f6>避免不必要的重新渲染</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#纯组件" class="sidebar-link reco-side-纯组件" data-v-cb1513f6>纯组件</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#虚拟dom和diff算法" class="sidebar-link reco-side-虚拟dom和diff算法" data-v-cb1513f6>虚拟DOM和Diff算法</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#虚拟dom" class="sidebar-link reco-side-虚拟dom" data-v-cb1513f6>虚拟DOM</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#diff算法" class="sidebar-link reco-side-diff算法" data-v-cb1513f6>Diff算法</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#代码演示" class="sidebar-link reco-side-代码演示" data-v-cb1513f6>代码演示</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#小结" class="sidebar-link reco-side-小结" data-v-cb1513f6>小结</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#目标-2" class="sidebar-link reco-side-目标-2" data-v-cb1513f6>目标</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#react路由介绍" class="sidebar-link reco-side-react路由介绍" data-v-cb1513f6>React路由介绍</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend/react/react.html#路由的基本使用" class="sidebar-link reco-side-路由的基本使用" data-v-cb1513f6>路由的基本使用</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#使用步骤" class="sidebar-link reco-side-使用步骤" data-v-cb1513f6>使用步骤</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#常用组件说明" class="sidebar-link reco-side-常用组件说明" data-v-cb1513f6>常用组件说明</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#路由的执行过程" class="sidebar-link reco-side-路由的执行过程" data-v-cb1513f6>路由的执行过程</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#编程式导航" class="sidebar-link reco-side-编程式导航" data-v-cb1513f6>编程式导航</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#默认路由" class="sidebar-link reco-side-默认路由" data-v-cb1513f6>默认路由</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#匹配模式" class="sidebar-link reco-side-匹配模式" data-v-cb1513f6>匹配模式</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend/react/react.html#小结-2" class="sidebar-link reco-side-小结-2" data-v-cb1513f6>小结</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/frontend/assets/js/app.49595f4b.js" defer></script><script src="/frontend/assets/js/3.03f8d344.js" defer></script><script src="/frontend/assets/js/1.070fcf05.js" defer></script><script src="/frontend/assets/js/11.0b773cd9.js" defer></script>
  </body>
</html>
